RewriteEngine On
RewriteBase /

# Serve files from the /static directory directly
RewriteCond %{REQUEST_URI} ^/static/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^static/(.*)$ static/$1 [L]

# Proxy requests to /api to port 3001
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ http://localhost:3001/api/$1 [P]

RewriteRule ^index\.html$ - [L]

# Exclude /static from rewriting
RewriteCond %{REQUEST_URI} !^/static/


RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]